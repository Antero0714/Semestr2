# Semestr2

## Информация

- **Техническое задание**: Подробное описание функционала и требований проекта доступно в файле `ТЗ.docx`.
- **Figma**: Дизайн и функциональные схемы доступны по [ссылке](https://www.figma.com).

Этот проект представляет собой веб-сервер с использованием `HttpServerLibrary`, поддерживающий шаблонизацию через `TemplateEngine` и взаимодействие с базой данных посредством `MyORMLibrary`.

## Структура проекта

- **HttpServerLibrary**: Библиотека для обработки HTTP-запросов и ответов.
- **TemplateEngine**: Модуль для обработки шаблонов и генерации HTML-страниц.
- **MyORMLibrary**: Библиотека для взаимодействия с базой данных.
- **MyHttpServer**: Основное приложение, использующее вышеперечисленные библиотеки.

## Требования

- **Docker**: Убедитесь, что Docker установлен и запущен на вашей системе.
- **Docker Compose**: Для оркестрации контейнеров используется Docker Compose.

## Установка и запуск

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/Antero0714/Semestr2.git
   ```

2. Перейдите в директорию проекта:

   ```bash
   cd Semestr2
   ```

3. Запустите Docker Compose:

   ```bash
   docker-compose up -d
   ```

   Это команда создаст и запустит необходимые контейнеры в фоновом режиме.

## Настройка базы данных

После запуска контейнеров необходимо создать таблицу `users` в базе данных. Для этого:

1. Откройте SQL Server Object Explorer в вашей IDE или используйте любой инструмент для управления базой данных.

2. Подключитесь к базе данных, используя следующие параметры подключения:

   - **Сервер**: `localhost`
   - **Порт**: `1433`
   - **Пользователь**: `sa`
   - **Пароль**: `your_password` (замените на фактический пароль, указанный в `docker-compose.yml`)

3. Создайте таблицу `users`, выполнив скрипт из файла `dbo.Users.sql`, расположенного в корне репозитория:

   ```sql
   CREATE TABLE users (
       id INT PRIMARY KEY IDENTITY(1,1),
       username NVARCHAR(50) NOT NULL,
       password_hash NVARCHAR(255) NOT NULL,
       email NVARCHAR(100) NOT NULL
   );
   ```

   Этот скрипт создаст таблицу `users` с полями `id`, `username`, `password_hash` и `email`.

## Использование

После успешного запуска контейнеров и настройки базы данных, приложение будет доступно по адресу `http://localhost:8080`. Вы можете взаимодействовать с сервером через браузер или инструменты, такие как `curl` или Postman.

### Инструкция по переходам через URL:

- [http://localhost:8888/main](http://localhost:8888/main) - переход на главную страницу
- [http://localhost:8888/control](http://localhost:8888/control) - переход на панель управления фильмами (Необходима регистрация на сайте)
- [http://localhost:8888/film?id=""](http://localhost:8888/film?id="") - возможность перейти на конкретный фильм по `id` этого фильма

**P.S.** В консоли будет отображаться отладочная информация, связанная с cookies пользователя.

## Остановка

Чтобы остановить и удалить контейнеры, выполните:

```bash
docker-compose down
```



<h3 align="center"> README - Инструкция по перемещению на сайте (по URL) </h3>
<h4>(FIGMA - функционал сайта) </h4>
<h4>(ТЗ.docx - О панели управления и сайте) </h4>

[FIGMA](https://www.figma.com/design/27MFM5D4OFnPZgZbwPc4tK/Untitled?node-id=1-1413&t=ab9rq5pXGn4wGg5s-0/)

**HOST:** Для запуска проекта необходимо открыть распаковать .**zip** архив данного репозитория и запустить .**sln** файл. Перед тем, как запустить проект, убедитесь, что **host 8888 свободен** на вашем ПК. Если нет, то необходимо поменять Ваш хост в файле MyHttpServer\Config.json -> "Port": 8888.

**DATABASE:** Для того чтобы все необходимые данные в сайте подгружались корректно, необходимо создать свою базу данных (для этого в данном прокте использовался **Docker Desktop**) с таблицами(или добавить в уже существующую), наполненными необходимой информацией, для этого используйте файл **scriptForDataBase.txt**. 
Для подключения соединения с базой данных воспользуйтесь тем же MyHttpServer\Config.json и введите свою строку подключения в  **ConnectionString** _("ConnectionString": "Data Source=localhost;Initial Catalog=User;User ID=sa;Password=P@ssw0rd")_


Далее запустите данный проект -> появится консольное окно, говорящее об успешном запуске сервера.
Теперь в строке браузера вы можете зайти на сайт и перемещаться по его содержимому (с учётом ТЗ и "Figma"):

**Инструкция по переходам через URL:**

http://localhost:8888/main - переход на главную страницу

http://localhost:8888/control - переход на панель управления фильмами (**Необходима регистрация на сайте**)

http://localhost:8888/film?id="" (возможность перейти на конкретный фильм по id этого фильма)


P.S. В консоли будет отображаться отладочная информация, связанная с cookies пользователя.
